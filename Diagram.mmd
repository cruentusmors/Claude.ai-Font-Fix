---
query: "update #file:Diagram.mmd to reflect the current state of this chrome
  extension"
references:
  - "File: /Diagram.mmd"
generationTime: 2025-08-20T17:26:36.600Z
---
flowchart TB
    User([ðŸ‘¤ User]) --> Browser{ðŸŒ Chrome Browser}
    
    Browser --> Popup[ðŸŽ¨ Extension Popup]
    Browser --> ContentScript[ðŸ“„ Content Script]
    Browser --> Background[âš™ï¸ Background/Service Worker]
    
    subgraph "Extension Core"
        Popup --> |User Interactions| Background
        ContentScript --> |DOM Events| Background
        Background --> |State Management| Storage[(ðŸ’¾ Chrome Storage)]
        Background --> |API Calls| ChromeAPIs[ðŸ”§ Chrome APIs]
    end
    
    subgraph "Web Page Integration"
        ContentScript --> |Inject/Modify| DOM[ðŸŒ Page DOM]
        ContentScript --> |Script Injection| PageScripts[ðŸ’‰ Injected Scripts]
        DOM --> |Font Detection| FontAnalysis[ðŸ” Font Analysis]
    end
    
    subgraph "Chrome APIs & Permissions"
        ChromeAPIs --> Tabs[ðŸ“‘ Tabs API]
        ChromeAPIs --> ActiveTab[ðŸŽ¯ Active Tab]
        ChromeAPIs --> Host[ðŸŒ Host Permissions]
        ChromeAPIs --> Scripting[âš¡ Scripting API]
    end
    
    subgraph "Storage & Settings"
        Storage --> Local[ðŸ“‚ Local Storage]
        Storage --> Sync[â˜ï¸ Sync Storage]
        Local --> Settings[âš™ï¸ User Settings]
        Sync --> Preferences[ðŸ“‹ User Preferences]
    end
    
    subgraph "Font Processing"
        FontAnalysis --> FontDetection[ðŸ”¤ Font Detection]
        FontDetection --> FontReplacement[ðŸ”„ Font Replacement]
        FontReplacement --> CSSInjection[ðŸ’… CSS Injection]
    end
    
    Background --> |Notifications| Notifications[ðŸ”” User Notifications]
    Background --> |Context Menu| ContextMenu[ðŸ“‹ Right-click Menu]
    
    Popup -.-> |Opens| Options[âš™ï¸ Options Page]
    Background -.-> |Debug Info| DevTools[ðŸ”§ Developer Tools]
    
    %% Data Flow Connections
    User --> |Clicks Extension| Popup
    User --> |Right-clicks| ContextMenu
    User --> |Browses Web| DOM
    
    Settings --> |Configure| FontReplacement
    Preferences --> |Sync Across Devices| FontReplacement