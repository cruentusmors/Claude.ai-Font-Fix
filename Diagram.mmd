---
query: "update #file:Diagram.mmd to reflect the current state of this chrome
  extension"
references:
  - "File: /Diagram.mmd"
generationTime: 2025-08-20T17:26:36.600Z
---
flowchart TB
    User([👤 User]) --> Browser{🌐 Chrome Browser}
    
    Browser --> Popup[🎨 Extension Popup]
    Browser --> ContentScript[📄 Content Script]
    Browser --> Background[⚙️ Background/Service Worker]
    
    subgraph "Extension Core"
        Popup --> |User Interactions| Background
        ContentScript --> |DOM Events| Background
        Background --> |State Management| Storage[(💾 Chrome Storage)]
        Background --> |API Calls| ChromeAPIs[🔧 Chrome APIs]
    end
    
    subgraph "Web Page Integration"
        ContentScript --> |Inject/Modify| DOM[🌍 Page DOM]
        ContentScript --> |Script Injection| PageScripts[💉 Injected Scripts]
        DOM --> |Font Detection| FontAnalysis[🔍 Font Analysis]
    end
    
    subgraph "Chrome APIs & Permissions"
        ChromeAPIs --> Tabs[📑 Tabs API]
        ChromeAPIs --> ActiveTab[🎯 Active Tab]
        ChromeAPIs --> Host[🌐 Host Permissions]
        ChromeAPIs --> Scripting[⚡ Scripting API]
    end
    
    subgraph "Storage & Settings"
        Storage --> Local[📂 Local Storage]
        Storage --> Sync[☁️ Sync Storage]
        Local --> Settings[⚙️ User Settings]
        Sync --> Preferences[📋 User Preferences]
    end
    
    subgraph "Font Processing"
        FontAnalysis --> FontDetection[🔤 Font Detection]
        FontDetection --> FontReplacement[🔄 Font Replacement]
        FontReplacement --> CSSInjection[💅 CSS Injection]
    end
    
    Background --> |Notifications| Notifications[🔔 User Notifications]
    Background --> |Context Menu| ContextMenu[📋 Right-click Menu]
    
    Popup -.-> |Opens| Options[⚙️ Options Page]
    Background -.-> |Debug Info| DevTools[🔧 Developer Tools]
    
    %% Data Flow Connections
    User --> |Clicks Extension| Popup
    User --> |Right-clicks| ContextMenu
    User --> |Browses Web| DOM
    
    Settings --> |Configure| FontReplacement
    Preferences --> |Sync Across Devices| FontReplacement