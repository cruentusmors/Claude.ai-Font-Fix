<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Font Test - Claude Font Fix</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 40px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            line-height: 1.6;
        }
        
        .font-test {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .system-font {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }
        
        .lexend-font {
            font-family: "Lexend", sans-serif;
        }
        
        .lexend-deca-font {
            font-family: "Lexend Deca", sans-serif;
        }
        
        .test-text {
            font-size: 16px;
            margin: 10px 0;
        }
        
        .test-heading {
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .debug-info {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Font Loading Test for Claude Font Fix</h1>
    <p>This page tests whether dyslexic-friendly fonts are loading correctly.</p>
    
    <div class="font-test">
        <div class="test-heading">System Default Font</div>
        <div class="test-text system-font">
            The quick brown fox jumps over the lazy dog. This text uses the system default font stack.
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
        <div class="debug-info" id="system-debug"></div>
    </div>
    
    <div class="font-test">
        <div class="test-heading">Lexend Font (Primary)</div>
        <div class="test-text lexend-font">
            The quick brown fox jumps over the lazy dog. This text uses Lexend font for improved reading comprehension.
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
        <div class="debug-info" id="lexend-debug"></div>
    </div>
    
    <div class="font-test">
        <div class="test-heading">Lexend Deca Font (Alternative)</div>
        <div class="test-text lexend-deca-font">
            The quick brown fox jumps over the lazy dog. This text uses Lexend Deca font as an alternative.
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </div>
        <div class="debug-info" id="lexend-deca-debug"></div>
    </div>
    
    <div class="font-test">
        <div class="test-heading">Font Loading Status</div>
        <div id="font-status">Checking font loading status...</div>
    </div>

    <script>
        // Font detection and debugging
        function detectFont(element) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            const testText = 'The quick brown fox';
            
            // Get computed font family
            const computedStyle = window.getComputedStyle(element);
            const fontFamily = computedStyle.fontFamily;
            
            // Test actual rendering
            context.font = `16px ${fontFamily}`;
            const testWidth = context.measureText(testText).width;
            
            // Test with fallback
            context.font = '16px monospace';
            const fallbackWidth = context.measureText(testText).width;
            
            const isCustomFont = Math.abs(testWidth - fallbackWidth) > 2;
            
            return {
                declared: fontFamily,
                isLoaded: isCustomFont,
                width: testWidth
            };
        }
        
        function updateDebugInfo() {
            const systemTest = detectFont(document.querySelector('.system-font'));
            const lexendTest = detectFont(document.querySelector('.lexend-font'));
            const lexendDecaTest = detectFont(document.querySelector('.lexend-deca-font'));
            
            document.getElementById('system-debug').textContent = 
                `Font: ${systemTest.declared} | Loaded: ${systemTest.isLoaded} | Width: ${systemTest.width}px`;
            
            document.getElementById('lexend-debug').textContent = 
                `Font: ${lexendTest.declared} | Loaded: ${lexendTest.isLoaded} | Width: ${lexendTest.width}px`;
            
            document.getElementById('lexend-deca-debug').textContent = 
                `Font: ${lexendDecaTest.declared} | Loaded: ${lexendDecaTest.isLoaded} | Width: ${lexendDecaTest.width}px`;
            
            // Overall status
            const statusElement = document.getElementById('font-status');
            if (lexendTest.isLoaded || lexendDecaTest.isLoaded) {
                statusElement.innerHTML = '<span style="color: green;">✓ Lexend fonts are loading correctly!</span>';
            } else {
                statusElement.innerHTML = '<span style="color: red;">⚠ Lexend fonts may not be loading. Check network connectivity.</span>';
            }
        }
        
        // Check font loading
        if (document.fonts && document.fonts.ready) {
            document.fonts.ready.then(() => {
                setTimeout(updateDebugInfo, 100);
            });
        } else {
            // Fallback for browsers without font loading API
            setTimeout(updateDebugInfo, 2000);
        }
        
        // Also update immediately
        updateDebugInfo();
    </script>
</body>
</html>